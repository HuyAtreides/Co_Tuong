{"ast":null,"code":"import _regeneratorRuntime from\"F:/Web/C\\u1EDD T\\u01B0\\u1EDBng/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/Web/C\\u1EDD T\\u01B0\\u1EDBng/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useContext}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Navbar,NavDropdown,Nav,Button}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import callAPI from\"../../App/callAPI.js\";import{SocketContext}from\"../../App/context.js\";import\"./NavBar.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NavBar=function NavBar(props){var dispatch=useDispatch();var socket=useContext(SocketContext);var lang=useSelector(function(state){return state.appState.lang;});var handleSetLang=function handleSetLang(event){var selectedLang=event.currentTarget.text;dispatch({type:\"setLang\",value:selectedLang});};var isAuthenticated=useSelector(function(state){return state.appState.isAuthenticated;});var handleLogout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:props.setWaitForResponse(true);_context.next=3;return callAPI(\"GET\",\"/logout\",null);case 3:if(event)socket.emit(\"logout\");dispatch({type:\"setIsAuthenticated\",value:false});dispatch({type:\"setPlayerInfo\",value:null});socket.disconnect();case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleLogout(_x){return _ref.apply(this,arguments);};}();useEffect(function(){socket.on(\"accountLogout\",function(){handleLogout(null);});return function(){socket.removeAllListeners(\"accountLogout\");};},[]);return/*#__PURE__*/_jsxs(Navbar,{expand:\"md\",className:\"nav-bar\",children:[/*#__PURE__*/_jsx(Navbar.Brand,{children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"link-brand\",children:\"Xiangqi\"})}),/*#__PURE__*/_jsx(Navbar.Toggle,{\"aria-controls\":\"basic-navbar-nav\"}),/*#__PURE__*/_jsx(Navbar.Collapse,{id:\"basic-navbar-nav\",children:/*#__PURE__*/_jsxs(Nav,{className:\"nav\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\".concat(isAuthenticated&&isAuthenticated!==\"guest\"?\"home\":\"login\"),className:\"link nav-link\",children:isAuthenticated&&isAuthenticated!==\"guest\"?\"Home\":\"Sign In\"}),/*#__PURE__*/_jsx(\"button\",{className:\"link nav-link logout\",onClick:handleLogout,style:{display:isAuthenticated&&isAuthenticated!==\"guest\"?\"inline\":\"none\"},children:\"Log Out\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:\"link nav-link \",style:{display:isAuthenticated&&isAuthenticated!==\"guest\"?\"none\":\"inline\"},children:\"Sign Up\"}),/*#__PURE__*/_jsxs(NavDropdown,{title:lang,id:\"basic-nav-dropdown\",children:[/*#__PURE__*/_jsx(NavDropdown.Item,{onClick:handleSetLang,children:\"Ti\\u1EBFng Vi\\u1EC7t\"}),/*#__PURE__*/_jsx(NavDropdown.Item,{onClick:handleSetLang,children:\"English\"})]})]})})]});};export default NavBar;","map":{"version":3,"sources":["F:/Web/Cờ Tướng/front_end/src/Components/Main/NavBar/NavBar.jsx"],"names":["React","useEffect","useContext","useDispatch","useSelector","Navbar","NavDropdown","Nav","Button","Link","callAPI","SocketContext","NavBar","props","dispatch","socket","lang","state","appState","handleSetLang","event","selectedLang","currentTarget","text","type","value","isAuthenticated","handleLogout","setWaitForResponse","emit","disconnect","on","removeAllListeners","display"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Navbar, NavDropdown, Nav, Button } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport callAPI from \"../../App/callAPI.js\";\r\nimport { SocketContext } from \"../../App/context.js\";\r\nimport \"./NavBar.scss\";\r\n\r\nconst NavBar = (props) => {\r\n  const dispatch = useDispatch();\r\n  const socket = useContext(SocketContext);\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const handleSetLang = (event) => {\r\n    const selectedLang = event.currentTarget.text;\r\n    dispatch({ type: \"setLang\", value: selectedLang });\r\n  };\r\n  const isAuthenticated = useSelector(\r\n    (state) => state.appState.isAuthenticated\r\n  );\r\n\r\n  const handleLogout = async (event) => {\r\n    props.setWaitForResponse(true);\r\n    await callAPI(\"GET\", \"/logout\", null);\r\n    if (event) socket.emit(\"logout\");\r\n    dispatch({ type: \"setIsAuthenticated\", value: false });\r\n    dispatch({ type: \"setPlayerInfo\", value: null });\r\n    socket.disconnect();\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(\"accountLogout\", () => {\r\n      handleLogout(null);\r\n    });\r\n\r\n    return () => {\r\n      socket.removeAllListeners(\"accountLogout\");\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Navbar expand=\"md\" className=\"nav-bar\">\r\n      <Navbar.Brand>\r\n        <Link to=\"/\" className=\"link-brand\">\r\n          Xiangqi\r\n        </Link>\r\n      </Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n      <Navbar.Collapse id=\"basic-navbar-nav\">\r\n        <Nav className=\"nav\">\r\n          <Link\r\n            to={`/${\r\n              isAuthenticated && isAuthenticated !== \"guest\" ? \"home\" : \"login\"\r\n            }`}\r\n            className=\"link nav-link\"\r\n          >\r\n            {isAuthenticated && isAuthenticated !== \"guest\"\r\n              ? \"Home\"\r\n              : \"Sign In\"}\r\n          </Link>\r\n          <button\r\n            className=\"link nav-link logout\"\r\n            onClick={handleLogout}\r\n            style={{\r\n              display:\r\n                isAuthenticated && isAuthenticated !== \"guest\"\r\n                  ? \"inline\"\r\n                  : \"none\",\r\n            }}\r\n          >\r\n            Log Out\r\n          </button>\r\n          <Link\r\n            to=\"/signup\"\r\n            className=\"link nav-link \"\r\n            style={{\r\n              display:\r\n                isAuthenticated && isAuthenticated !== \"guest\"\r\n                  ? \"none\"\r\n                  : \"inline\",\r\n            }}\r\n          >\r\n            Sign Up\r\n          </Link>\r\n          <NavDropdown title={lang} id=\"basic-nav-dropdown\">\r\n            <NavDropdown.Item onClick={handleSetLang}>\r\n              Tiếng Việt\r\n            </NavDropdown.Item>\r\n            <NavDropdown.Item onClick={handleSetLang}>English</NavDropdown.Item>\r\n          </NavDropdown>\r\n        </Nav>\r\n      </Navbar.Collapse>\r\n    </Navbar>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n"]},"metadata":{},"sourceType":"module"}