{"ast":null,"code":"import _createForOfIteratorHelper from\"F:/Web/C\\u1EDD T\\u01B0\\u1EDBng/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"F:/Web/C\\u1EDD T\\u01B0\\u1EDBng/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"F:/Web/C\\u1EDD T\\u01B0\\u1EDBng/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"F:/Web/C\\u1EDD T\\u01B0\\u1EDBng/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"F:/Web/C\\u1EDD T\\u01B0\\u1EDBng/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"F:/Web/C\\u1EDD T\\u01B0\\u1EDBng/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import horseRules from\"./move_rules/horseRules.js\";import Piece from\"./piece.js\";var Horse=/*#__PURE__*/function(_Piece){_inherits(Horse,_Piece);var _super=_createSuper(Horse);function Horse(width,row,col,name,choosenSide){var _this;_classCallCheck(this,Horse);_this=_super.call(this,width,row,col,name,choosenSide);_this.moves=horseRules;return _this;}_createClass(Horse,[{key:\"canMoveToNewPosition\",value:function canMoveToNewPosition(newRow,newCol,board){var _this$position=_slicedToArray(this.position,2),curRow=_this$position[0],curCol=_this$position[1];var translateX=curCol*this.width,translateY=curRow*this.width;this.translate=\"translate(\".concat(translateX,\", \").concat(translateY,\")\");if(this.side===this.choosenSide[1]){var isValid=this.checkValidMove(newRow,newCol,board);if(isValid&&!/translate/.test(isValid)){if(!this.isBlocked(newRow,newCol,board)){if(!board[newRow][newCol].side){return true;}else if(board[newRow][newCol].side!==board[curRow][curCol].side)return\"capture\";}}else if(isValid)return isValid;}return false;}},{key:\"isBlocked\",value:function isBlocked(newRow,newCol,board){var _this$position2=_slicedToArray(this.position,2),curRow=_this$position2[0],curCol=_this$position2[1];var moveRow=newRow-curRow,moveCol=newCol-curCol;if(Math.abs(moveRow)===2){return board[curRow+moveRow/2][curCol]!==0;}else{return board[curRow][curCol+moveCol/2]!==0;}}},{key:\"canCaptureGeneral\",value:function canCaptureGeneral(tmpBoard){var _this$position3=_slicedToArray(this.position,2),curRow=_this$position3[0],curCol=_this$position3[1];var _iterator=_createForOfIteratorHelper(this.moves),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var move=_step.value;var newRow=curRow+move[0],newCol=curCol+move[1];if(newCol>=0&&newCol<9&&newRow>=0&&newRow<10){if(tmpBoard[newRow][newCol].side)if(tmpBoard[newRow][newCol].side!==tmpBoard[curRow][curCol].side)if(!this.isBlocked(newRow,newCol,tmpBoard))if(tmpBoard[newRow][newCol].name.split(\"-\")[0]===\"general\"){return tmpBoard[newRow][newCol].translate;}}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return false;}}]);return Horse;}(Piece);export default Horse;","map":{"version":3,"sources":["F:/Web/Cờ Tướng/front_end/src/pieces/horse.js"],"names":["horseRules","Piece","Horse","width","row","col","name","choosenSide","moves","newRow","newCol","board","position","curRow","curCol","translateX","translateY","translate","side","isValid","checkValidMove","test","isBlocked","moveRow","moveCol","Math","abs","tmpBoard","move","split"],"mappings":"k8BAAA,MAAOA,CAAAA,UAAP,KAAuB,4BAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,YAAlB,C,GAEMC,CAAAA,K,sFACJ,eAAYC,KAAZ,CAAmBC,GAAnB,CAAwBC,GAAxB,CAA6BC,IAA7B,CAAmCC,WAAnC,CAAgD,uCAC9C,uBAAMJ,KAAN,CAAaC,GAAb,CAAkBC,GAAlB,CAAuBC,IAAvB,CAA6BC,WAA7B,EACA,MAAKC,KAAL,CAAaR,UAAb,CAF8C,aAG/C,C,sDAED,8BAAqBS,MAArB,CAA6BC,MAA7B,CAAqCC,KAArC,CAA4C,mCACjB,KAAKC,QADY,IACnCC,MADmC,mBAC3BC,MAD2B,sBAEnCC,CAAAA,UAFmC,CAERD,MAAM,CAAG,KAAKX,KAFN,CAEvBa,UAFuB,CAEaH,MAAM,CAAG,KAAKV,KAF3B,CAG1C,KAAKc,SAAL,qBAA8BF,UAA9B,cAA6CC,UAA7C,MACA,GAAI,KAAKE,IAAL,GAAc,KAAKX,WAAL,CAAiB,CAAjB,CAAlB,CAAuC,CACrC,GAAMY,CAAAA,OAAO,CAAG,KAAKC,cAAL,CAAoBX,MAApB,CAA4BC,MAA5B,CAAoCC,KAApC,CAAhB,CACA,GAAIQ,OAAO,EAAI,CAAC,YAAYE,IAAZ,CAAiBF,OAAjB,CAAhB,CAA2C,CACzC,GAAI,CAAC,KAAKG,SAAL,CAAeb,MAAf,CAAuBC,MAAvB,CAA+BC,KAA/B,CAAL,CAA4C,CAC1C,GAAI,CAACA,KAAK,CAACF,MAAD,CAAL,CAAcC,MAAd,EAAsBQ,IAA3B,CAAiC,CAC/B,MAAO,KAAP,CACD,CAFD,IAEO,IAAIP,KAAK,CAACF,MAAD,CAAL,CAAcC,MAAd,EAAsBQ,IAAtB,GAA+BP,KAAK,CAACE,MAAD,CAAL,CAAcC,MAAd,EAAsBI,IAAzD,CACL,MAAO,SAAP,CACH,CACF,CAPD,IAOO,IAAIC,OAAJ,CAAa,MAAOA,CAAAA,OAAP,CACrB,CACD,MAAO,MAAP,CACD,C,yBAED,mBAAUV,MAAV,CAAkBC,MAAlB,CAA0BC,KAA1B,CAAiC,oCACN,KAAKC,QADC,IACxBC,MADwB,oBAChBC,MADgB,uBAExBS,CAAAA,OAFwB,CAEHd,MAAM,CAAGI,MAFN,CAEfW,OAFe,CAEcd,MAAM,CAAGI,MAFvB,CAG/B,GAAIW,IAAI,CAACC,GAAL,CAASH,OAAT,IAAsB,CAA1B,CAA6B,CAC3B,MAAOZ,CAAAA,KAAK,CAACE,MAAM,CAAGU,OAAO,CAAG,CAApB,CAAL,CAA4BT,MAA5B,IAAwC,CAA/C,CACD,CAFD,IAEO,CACL,MAAOH,CAAAA,KAAK,CAACE,MAAD,CAAL,CAAcC,MAAM,CAAGU,OAAO,CAAG,CAAjC,IAAwC,CAA/C,CACD,CACF,C,iCAED,2BAAkBG,QAAlB,CAA4B,oCACD,KAAKf,QADJ,IACnBC,MADmB,oBACXC,MADW,6DAET,KAAKN,KAFI,YAE1B,+CAA6B,IAApBoB,CAAAA,IAAoB,gBACpBnB,CAAAA,MADoB,CACDI,MAAM,CAAGe,IAAI,CAAC,CAAD,CADZ,CACZlB,MADY,CACiBI,MAAM,CAAGc,IAAI,CAAC,CAAD,CAD9B,CAE3B,GAAIlB,MAAM,EAAI,CAAV,EAAeA,MAAM,CAAG,CAAxB,EAA6BD,MAAM,EAAI,CAAvC,EAA4CA,MAAM,CAAG,EAAzD,CAA6D,CAC3D,GAAIkB,QAAQ,CAAClB,MAAD,CAAR,CAAiBC,MAAjB,EAAyBQ,IAA7B,CACE,GAAIS,QAAQ,CAAClB,MAAD,CAAR,CAAiBC,MAAjB,EAAyBQ,IAAzB,GAAkCS,QAAQ,CAACd,MAAD,CAAR,CAAiBC,MAAjB,EAAyBI,IAA/D,CACE,GAAI,CAAC,KAAKI,SAAL,CAAeb,MAAf,CAAuBC,MAAvB,CAA+BiB,QAA/B,CAAL,CACE,GAAIA,QAAQ,CAAClB,MAAD,CAAR,CAAiBC,MAAjB,EAAyBJ,IAAzB,CAA8BuB,KAA9B,CAAoC,GAApC,EAAyC,CAAzC,IAAgD,SAApD,CAA+D,CAC7D,MAAOF,CAAAA,QAAQ,CAAClB,MAAD,CAAR,CAAiBC,MAAjB,EAAyBO,SAAhC,CACD,CACR,CACF,CAZyB,qDAa1B,MAAO,MAAP,CACD,C,mBAhDiBhB,K,EAmDpB,cAAeC,CAAAA,KAAf","sourcesContent":["import horseRules from \"./move_rules/horseRules.js\";\r\nimport Piece from \"./piece.js\";\r\n\r\nclass Horse extends Piece {\r\n  constructor(width, row, col, name, choosenSide) {\r\n    super(width, row, col, name, choosenSide);\r\n    this.moves = horseRules;\r\n  }\r\n\r\n  canMoveToNewPosition(newRow, newCol, board) {\r\n    const [curRow, curCol] = this.position;\r\n    const [translateX, translateY] = [curCol * this.width, curRow * this.width];\r\n    this.translate = `translate(${translateX}, ${translateY})`;\r\n    if (this.side === this.choosenSide[1]) {\r\n      const isValid = this.checkValidMove(newRow, newCol, board);\r\n      if (isValid && !/translate/.test(isValid)) {\r\n        if (!this.isBlocked(newRow, newCol, board)) {\r\n          if (!board[newRow][newCol].side) {\r\n            return true;\r\n          } else if (board[newRow][newCol].side !== board[curRow][curCol].side)\r\n            return \"capture\";\r\n        }\r\n      } else if (isValid) return isValid;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  isBlocked(newRow, newCol, board) {\r\n    const [curRow, curCol] = this.position;\r\n    const [moveRow, moveCol] = [newRow - curRow, newCol - curCol];\r\n    if (Math.abs(moveRow) === 2) {\r\n      return board[curRow + moveRow / 2][curCol] !== 0;\r\n    } else {\r\n      return board[curRow][curCol + moveCol / 2] !== 0;\r\n    }\r\n  }\r\n\r\n  canCaptureGeneral(tmpBoard) {\r\n    const [curRow, curCol] = this.position;\r\n    for (let move of this.moves) {\r\n      const [newRow, newCol] = [curRow + move[0], curCol + move[1]];\r\n      if (newCol >= 0 && newCol < 9 && newRow >= 0 && newRow < 10) {\r\n        if (tmpBoard[newRow][newCol].side)\r\n          if (tmpBoard[newRow][newCol].side !== tmpBoard[curRow][curCol].side)\r\n            if (!this.isBlocked(newRow, newCol, tmpBoard))\r\n              if (tmpBoard[newRow][newCol].name.split(\"-\")[0] === \"general\") {\r\n                return tmpBoard[newRow][newCol].translate;\r\n              }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default Horse;\r\n"]},"metadata":{},"sourceType":"module"}