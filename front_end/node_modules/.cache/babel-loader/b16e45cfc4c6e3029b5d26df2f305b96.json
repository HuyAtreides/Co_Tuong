{"ast":null,"code":"class Piece {\n  constructor(width, row, col, name) {\n    this.width = width;\n    this.position = [row, col];\n    this.name = name;\n    this.side = name.split(\"-\")[1];\n    this.translate = `translate(${width * col}, ${width * row})`;\n  }\n\n  move(x, y) {\n    const translate = `translate(${x - this.width / 2}, ${y - this.width / 2})`;\n    this.translate = translate;\n  }\n\n  checkValidMove(moveRow, moveCol) {\n    const valid = this.moves.some(move => {\n      return move[0] === moveRow && move[1] === moveCol;\n    });\n    return valid;\n  }\n\n  setPosition(capture, newRow, newCol) {\n    const [translateX, translateY] = [newCol * this.width, newRow * this.width];\n    const translate = `translate(${translateX}, ${translateY})`;\n    this.position = [newRow, newCol];\n    this.translate = translate;\n    return [capture, newRow, newCol];\n  }\n\n  setNewPosition(x, y, board) {\n    const newCol = Math.floor(x / this.width);\n    const newRow = Math.floor(y / this.width);\n    const [curRow, curCol] = this.position;\n    const [translateX, translateY] = [curCol * this.width, curRow * this.width];\n    this.translate = `translate(${translateX}, ${translateY})`;\n\n    if (newCol >= 0 && newCol < 9 && newRow >= 0 && newRow < 10) {\n      if (this.checkValidMove(newRow - curRow, newCol - curCol, board)) {\n        if (!this.isBlocked(newRow, newCol, board)) if (!board[newRow][newCol].side) return this.setPosition(false, newRow, newCol);else if (board[newRow][newCol].side !== board[curRow][curCol].side) return this.setPosition(true, newRow, newCol);\n      }\n    }\n\n    return null;\n  }\n\n  isBlocked(newRow, newCol, board) {\n    let [curRow, curCol] = this.position;\n    let count = 0;\n\n    if (newRow === curRow) {\n      do {\n        curCol += curCol > newCol ? -1 : 1;\n        if (board[curRow][curCol]) count++;\n      } while (curCol !== newCol);\n    } else {\n      do {\n        curRow += curRow > newRow ? -1 : 1;\n        if (board[curRow][curCol]) count++;\n      } while (curRow !== newRow);\n    }\n\n    console.log(count);\n    return count - 1 === 0;\n  }\n\n}\n\nexport default Piece;","map":{"version":3,"sources":["F:/Web/Cờ Tướng/front_end/src/pieces/piece.js"],"names":["Piece","constructor","width","row","col","name","position","side","split","translate","move","x","y","checkValidMove","moveRow","moveCol","valid","moves","some","setPosition","capture","newRow","newCol","translateX","translateY","setNewPosition","board","Math","floor","curRow","curCol","isBlocked","count","console","log"],"mappings":"AAAA,MAAMA,KAAN,CAAY;AACVC,EAAAA,WAAW,CAACC,KAAD,EAAQC,GAAR,EAAaC,GAAb,EAAkBC,IAAlB,EAAwB;AACjC,SAAKH,KAAL,GAAaA,KAAb;AACA,SAAKI,QAAL,GAAgB,CAACH,GAAD,EAAMC,GAAN,CAAhB;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKE,IAAL,GAAYF,IAAI,CAACG,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAZ;AACA,SAAKC,SAAL,GAAkB,aAAYP,KAAK,GAAGE,GAAI,KAAIF,KAAK,GAAGC,GAAI,GAA1D;AACD;;AAEDO,EAAAA,IAAI,CAACC,CAAD,EAAIC,CAAJ,EAAO;AACT,UAAMH,SAAS,GAAI,aAAYE,CAAC,GAAG,KAAKT,KAAL,GAAa,CAAE,KAAIU,CAAC,GAAG,KAAKV,KAAL,GAAa,CAAE,GAAzE;AACA,SAAKO,SAAL,GAAiBA,SAAjB;AACD;;AAEDI,EAAAA,cAAc,CAACC,OAAD,EAAUC,OAAV,EAAmB;AAC/B,UAAMC,KAAK,GAAG,KAAKC,KAAL,CAAWC,IAAX,CAAiBR,IAAD,IAAU;AACtC,aAAOA,IAAI,CAAC,CAAD,CAAJ,KAAYI,OAAZ,IAAuBJ,IAAI,CAAC,CAAD,CAAJ,KAAYK,OAA1C;AACD,KAFa,CAAd;AAGA,WAAOC,KAAP;AACD;;AAEDG,EAAAA,WAAW,CAACC,OAAD,EAAUC,MAAV,EAAkBC,MAAlB,EAA0B;AACnC,UAAM,CAACC,UAAD,EAAaC,UAAb,IAA2B,CAACF,MAAM,GAAG,KAAKpB,KAAf,EAAsBmB,MAAM,GAAG,KAAKnB,KAApC,CAAjC;AACA,UAAMO,SAAS,GAAI,aAAYc,UAAW,KAAIC,UAAW,GAAzD;AACA,SAAKlB,QAAL,GAAgB,CAACe,MAAD,EAASC,MAAT,CAAhB;AACA,SAAKb,SAAL,GAAiBA,SAAjB;AACA,WAAO,CAACW,OAAD,EAAUC,MAAV,EAAkBC,MAAlB,CAAP;AACD;;AAEDG,EAAAA,cAAc,CAACd,CAAD,EAAIC,CAAJ,EAAOc,KAAP,EAAc;AAC1B,UAAMJ,MAAM,GAAGK,IAAI,CAACC,KAAL,CAAWjB,CAAC,GAAG,KAAKT,KAApB,CAAf;AACA,UAAMmB,MAAM,GAAGM,IAAI,CAACC,KAAL,CAAWhB,CAAC,GAAG,KAAKV,KAApB,CAAf;AACA,UAAM,CAAC2B,MAAD,EAASC,MAAT,IAAmB,KAAKxB,QAA9B;AACA,UAAM,CAACiB,UAAD,EAAaC,UAAb,IAA2B,CAACM,MAAM,GAAG,KAAK5B,KAAf,EAAsB2B,MAAM,GAAG,KAAK3B,KAApC,CAAjC;AACA,SAAKO,SAAL,GAAkB,aAAYc,UAAW,KAAIC,UAAW,GAAxD;;AACA,QAAIF,MAAM,IAAI,CAAV,IAAeA,MAAM,GAAG,CAAxB,IAA6BD,MAAM,IAAI,CAAvC,IAA4CA,MAAM,GAAG,EAAzD,EAA6D;AAC3D,UAAI,KAAKR,cAAL,CAAoBQ,MAAM,GAAGQ,MAA7B,EAAqCP,MAAM,GAAGQ,MAA9C,EAAsDJ,KAAtD,CAAJ,EAAkE;AAChE,YAAI,CAAC,KAAKK,SAAL,CAAeV,MAAf,EAAuBC,MAAvB,EAA+BI,KAA/B,CAAL,EACE,IAAI,CAACA,KAAK,CAACL,MAAD,CAAL,CAAcC,MAAd,EAAsBf,IAA3B,EACE,OAAO,KAAKY,WAAL,CAAiB,KAAjB,EAAwBE,MAAxB,EAAgCC,MAAhC,CAAP,CADF,KAEK,IAAII,KAAK,CAACL,MAAD,CAAL,CAAcC,MAAd,EAAsBf,IAAtB,KAA+BmB,KAAK,CAACG,MAAD,CAAL,CAAcC,MAAd,EAAsBvB,IAAzD,EACH,OAAO,KAAKY,WAAL,CAAiB,IAAjB,EAAuBE,MAAvB,EAA+BC,MAA/B,CAAP;AACL;AACF;;AACD,WAAO,IAAP;AACD;;AAEDS,EAAAA,SAAS,CAACV,MAAD,EAASC,MAAT,EAAiBI,KAAjB,EAAwB;AAC/B,QAAI,CAACG,MAAD,EAASC,MAAT,IAAmB,KAAKxB,QAA5B;AACA,QAAI0B,KAAK,GAAG,CAAZ;;AACA,QAAIX,MAAM,KAAKQ,MAAf,EAAuB;AACrB,SAAG;AACDC,QAAAA,MAAM,IAAIA,MAAM,GAAGR,MAAT,GAAkB,CAAC,CAAnB,GAAuB,CAAjC;AACA,YAAII,KAAK,CAACG,MAAD,CAAL,CAAcC,MAAd,CAAJ,EAA2BE,KAAK;AACjC,OAHD,QAGSF,MAAM,KAAKR,MAHpB;AAID,KALD,MAKO;AACL,SAAG;AACDO,QAAAA,MAAM,IAAIA,MAAM,GAAGR,MAAT,GAAkB,CAAC,CAAnB,GAAuB,CAAjC;AACA,YAAIK,KAAK,CAACG,MAAD,CAAL,CAAcC,MAAd,CAAJ,EAA2BE,KAAK;AACjC,OAHD,QAGSH,MAAM,KAAKR,MAHpB;AAID;;AACDY,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,WAAOA,KAAK,GAAG,CAAR,KAAc,CAArB;AACD;;AA/DS;;AAkEZ,eAAehC,KAAf","sourcesContent":["class Piece {\r\n  constructor(width, row, col, name) {\r\n    this.width = width;\r\n    this.position = [row, col];\r\n    this.name = name;\r\n    this.side = name.split(\"-\")[1];\r\n    this.translate = `translate(${width * col}, ${width * row})`;\r\n  }\r\n\r\n  move(x, y) {\r\n    const translate = `translate(${x - this.width / 2}, ${y - this.width / 2})`;\r\n    this.translate = translate;\r\n  }\r\n\r\n  checkValidMove(moveRow, moveCol) {\r\n    const valid = this.moves.some((move) => {\r\n      return move[0] === moveRow && move[1] === moveCol;\r\n    });\r\n    return valid;\r\n  }\r\n\r\n  setPosition(capture, newRow, newCol) {\r\n    const [translateX, translateY] = [newCol * this.width, newRow * this.width];\r\n    const translate = `translate(${translateX}, ${translateY})`;\r\n    this.position = [newRow, newCol];\r\n    this.translate = translate;\r\n    return [capture, newRow, newCol];\r\n  }\r\n\r\n  setNewPosition(x, y, board) {\r\n    const newCol = Math.floor(x / this.width);\r\n    const newRow = Math.floor(y / this.width);\r\n    const [curRow, curCol] = this.position;\r\n    const [translateX, translateY] = [curCol * this.width, curRow * this.width];\r\n    this.translate = `translate(${translateX}, ${translateY})`;\r\n    if (newCol >= 0 && newCol < 9 && newRow >= 0 && newRow < 10) {\r\n      if (this.checkValidMove(newRow - curRow, newCol - curCol, board)) {\r\n        if (!this.isBlocked(newRow, newCol, board))\r\n          if (!board[newRow][newCol].side)\r\n            return this.setPosition(false, newRow, newCol);\r\n          else if (board[newRow][newCol].side !== board[curRow][curCol].side)\r\n            return this.setPosition(true, newRow, newCol);\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  isBlocked(newRow, newCol, board) {\r\n    let [curRow, curCol] = this.position;\r\n    let count = 0;\r\n    if (newRow === curRow) {\r\n      do {\r\n        curCol += curCol > newCol ? -1 : 1;\r\n        if (board[curRow][curCol]) count++;\r\n      } while (curCol !== newCol);\r\n    } else {\r\n      do {\r\n        curRow += curRow > newRow ? -1 : 1;\r\n        if (board[curRow][curCol]) count++;\r\n      } while (curRow !== newRow);\r\n    }\r\n    console.log(count);\r\n    return count - 1 === 0;\r\n  }\r\n}\r\n\r\nexport default Piece;\r\n"]},"metadata":{},"sourceType":"module"}