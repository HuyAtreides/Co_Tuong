{"ast":null,"code":"import horseRules from \"./move_rules/horseRules.js\";\nimport Piece from \"./piece.js\";\n\nclass Horse extends Piece {\n  constructor(width, row, col, name) {\n    super(width, row, col, name);\n    this.moves = horseRules;\n  }\n\n  setNewPosition(x, y, board) {\n    const newCol = Math.floor(x / this.width);\n    const newRow = Math.floor(y / this.width);\n    const [curRow, curCol] = this.position;\n    const [translateX, translateY] = [curCol * this.width, curRow * this.width];\n    this.translate = `translate(${translateX}, ${translateY})`;\n\n    if (newCol >= 0 && newCol < 9 && newRow >= 0 && newRow < 10) {\n      if (this.checkValidMove(newRow - curRow, newCol - curCol, board)) {\n        if (!this.isBlocked(newRow, newCol, board)) {\n          if (!board[newRow][newCol].side) {\n            return this.setPosition(false, newRow, newCol);\n          }\n        } else if (board[newRow][newCol].side !== board[curRow][curCol].side) return this.setPosition(true, newRow, newCol);\n      }\n    }\n\n    return null;\n  }\n\n  isBlocked(newRow, newCol, board) {\n    const [curRow, curCol] = this.position;\n    const [moveRow, moveCol] = [newRow - curRow, newCol - curCol];\n\n    if (Math.abs(moveRow) === 2) {\n      return board[curRow + moveRow / 2][curCol] !== 0;\n    } else {\n      return board[curRow][curCol + moveCol / 2] !== 0;\n    }\n  }\n\n}\n\nexport default Horse;","map":{"version":3,"sources":["F:/Web/Cờ Tướng/front_end/src/pieces/horse.js"],"names":["horseRules","Piece","Horse","constructor","width","row","col","name","moves","setNewPosition","x","y","board","newCol","Math","floor","newRow","curRow","curCol","position","translateX","translateY","translate","checkValidMove","isBlocked","side","setPosition","moveRow","moveCol","abs"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,4BAAvB;AACA,OAAOC,KAAP,MAAkB,YAAlB;;AAEA,MAAMC,KAAN,SAAoBD,KAApB,CAA0B;AACxBE,EAAAA,WAAW,CAACC,KAAD,EAAQC,GAAR,EAAaC,GAAb,EAAkBC,IAAlB,EAAwB;AACjC,UAAMH,KAAN,EAAaC,GAAb,EAAkBC,GAAlB,EAAuBC,IAAvB;AACA,SAAKC,KAAL,GAAaR,UAAb;AACD;;AAEDS,EAAAA,cAAc,CAACC,CAAD,EAAIC,CAAJ,EAAOC,KAAP,EAAc;AAC1B,UAAMC,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWL,CAAC,GAAG,KAAKN,KAApB,CAAf;AACA,UAAMY,MAAM,GAAGF,IAAI,CAACC,KAAL,CAAWJ,CAAC,GAAG,KAAKP,KAApB,CAAf;AACA,UAAM,CAACa,MAAD,EAASC,MAAT,IAAmB,KAAKC,QAA9B;AACA,UAAM,CAACC,UAAD,EAAaC,UAAb,IAA2B,CAACH,MAAM,GAAG,KAAKd,KAAf,EAAsBa,MAAM,GAAG,KAAKb,KAApC,CAAjC;AACA,SAAKkB,SAAL,GAAkB,aAAYF,UAAW,KAAIC,UAAW,GAAxD;;AACA,QAAIR,MAAM,IAAI,CAAV,IAAeA,MAAM,GAAG,CAAxB,IAA6BG,MAAM,IAAI,CAAvC,IAA4CA,MAAM,GAAG,EAAzD,EAA6D;AAC3D,UAAI,KAAKO,cAAL,CAAoBP,MAAM,GAAGC,MAA7B,EAAqCJ,MAAM,GAAGK,MAA9C,EAAsDN,KAAtD,CAAJ,EAAkE;AAChE,YAAI,CAAC,KAAKY,SAAL,CAAeR,MAAf,EAAuBH,MAAvB,EAA+BD,KAA/B,CAAL,EAA4C;AAC1C,cAAI,CAACA,KAAK,CAACI,MAAD,CAAL,CAAcH,MAAd,EAAsBY,IAA3B,EAAiC;AAC/B,mBAAO,KAAKC,WAAL,CAAiB,KAAjB,EAAwBV,MAAxB,EAAgCH,MAAhC,CAAP;AACD;AACF,SAJD,MAIO,IAAID,KAAK,CAACI,MAAD,CAAL,CAAcH,MAAd,EAAsBY,IAAtB,KAA+Bb,KAAK,CAACK,MAAD,CAAL,CAAcC,MAAd,EAAsBO,IAAzD,EACL,OAAO,KAAKC,WAAL,CAAiB,IAAjB,EAAuBV,MAAvB,EAA+BH,MAA/B,CAAP;AACH;AACF;;AACD,WAAO,IAAP;AACD;;AAEDW,EAAAA,SAAS,CAACR,MAAD,EAASH,MAAT,EAAiBD,KAAjB,EAAwB;AAC/B,UAAM,CAACK,MAAD,EAASC,MAAT,IAAmB,KAAKC,QAA9B;AACA,UAAM,CAACQ,OAAD,EAAUC,OAAV,IAAqB,CAACZ,MAAM,GAAGC,MAAV,EAAkBJ,MAAM,GAAGK,MAA3B,CAA3B;;AACA,QAAIJ,IAAI,CAACe,GAAL,CAASF,OAAT,MAAsB,CAA1B,EAA6B;AAC3B,aAAOf,KAAK,CAACK,MAAM,GAAGU,OAAO,GAAG,CAApB,CAAL,CAA4BT,MAA5B,MAAwC,CAA/C;AACD,KAFD,MAEO;AACL,aAAON,KAAK,CAACK,MAAD,CAAL,CAAcC,MAAM,GAAGU,OAAO,GAAG,CAAjC,MAAwC,CAA/C;AACD;AACF;;AAjCuB;;AAoC1B,eAAe1B,KAAf","sourcesContent":["import horseRules from \"./move_rules/horseRules.js\";\r\nimport Piece from \"./piece.js\";\r\n\r\nclass Horse extends Piece {\r\n  constructor(width, row, col, name) {\r\n    super(width, row, col, name);\r\n    this.moves = horseRules;\r\n  }\r\n\r\n  setNewPosition(x, y, board) {\r\n    const newCol = Math.floor(x / this.width);\r\n    const newRow = Math.floor(y / this.width);\r\n    const [curRow, curCol] = this.position;\r\n    const [translateX, translateY] = [curCol * this.width, curRow * this.width];\r\n    this.translate = `translate(${translateX}, ${translateY})`;\r\n    if (newCol >= 0 && newCol < 9 && newRow >= 0 && newRow < 10) {\r\n      if (this.checkValidMove(newRow - curRow, newCol - curCol, board)) {\r\n        if (!this.isBlocked(newRow, newCol, board)) {\r\n          if (!board[newRow][newCol].side) {\r\n            return this.setPosition(false, newRow, newCol);\r\n          }\r\n        } else if (board[newRow][newCol].side !== board[curRow][curCol].side)\r\n          return this.setPosition(true, newRow, newCol);\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  isBlocked(newRow, newCol, board) {\r\n    const [curRow, curCol] = this.position;\r\n    const [moveRow, moveCol] = [newRow - curRow, newCol - curCol];\r\n    if (Math.abs(moveRow) === 2) {\r\n      return board[curRow + moveRow / 2][curCol] !== 0;\r\n    } else {\r\n      return board[curRow][curCol + moveCol / 2] !== 0;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Horse;\r\n"]},"metadata":{},"sourceType":"module"}