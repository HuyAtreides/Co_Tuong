{"ast":null,"code":"import React,{useEffect,useContext}from\"react\";import\"./Timer.scss\";import{useDispatch,useSelector}from\"react-redux\";import{SocketContext,SetMoveTimerContext}from\"../../../App/context.js\";import{jsx as _jsx}from\"react/jsx-runtime\";var Timer=function Timer(props){var dispatch=useDispatch();var minute=Math.floor(props.timeLeftToMove/60);var second=props.timeLeftToMove%60;var socket=useContext(SocketContext);var setMoveTimer=useContext(SetMoveTimerContext);var turnToMove=useSelector(function(state){return state.boardState.turnToMove;});useEffect(function(){if(props.timeLeftToMove===0&&turnToMove){var listItemRef=/*#__PURE__*/React.createRef();dispatch({type:\"setGameResult\",value:\"Lose\"});dispatch({type:\"setMessage\",value:{type:\"game result message\",winner:\"Opponent Won - \",reason:\"Game Abandoned\",className:\"game-message\",ref:listItemRef}});setMoveTimer(null,true,dispatch);socket.emit(\"gameFinish\",[\"Won\",\"Game Abandoned\"]);}},[props.timeLeftToMove]);return/*#__PURE__*/_jsx(\"div\",{className:\"clock \".concat(props.turnToMove?\"turn-to-move\":\"\"),children:/*#__PURE__*/_jsx(\"span\",{children:(minute<10?\"0\"+minute:minute)+\":\"+(second<10?\"0\"+second:second)})});};export default Timer;","map":{"version":3,"sources":["F:/Web/Cờ Tướng/front_end/src/Components/Main/Game/Timer/Timer.jsx"],"names":["React","useEffect","useContext","useDispatch","useSelector","SocketContext","SetMoveTimerContext","Timer","props","dispatch","minute","Math","floor","timeLeftToMove","second","socket","setMoveTimer","turnToMove","state","boardState","listItemRef","createRef","type","value","winner","reason","className","ref","emit"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,UAA3B,KAA6C,OAA7C,CACA,MAAO,cAAP,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,aAAT,CAAwBC,mBAAxB,KAAmD,yBAAnD,C,2CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,CACvB,GAAMC,CAAAA,QAAQ,CAAGN,WAAW,EAA5B,CACA,GAAMO,CAAAA,MAAM,CAAGC,IAAI,CAACC,KAAL,CAAWJ,KAAK,CAACK,cAAN,CAAuB,EAAlC,CAAf,CACA,GAAMC,CAAAA,MAAM,CAAGN,KAAK,CAACK,cAAN,CAAuB,EAAtC,CACA,GAAME,CAAAA,MAAM,CAAGb,UAAU,CAACG,aAAD,CAAzB,CACA,GAAMW,CAAAA,YAAY,CAAGd,UAAU,CAACI,mBAAD,CAA/B,CACA,GAAMW,CAAAA,UAAU,CAAGb,WAAW,CAAC,SAACc,KAAD,QAAWA,CAAAA,KAAK,CAACC,UAAN,CAAiBF,UAA5B,EAAD,CAA9B,CAEAhB,SAAS,CAAC,UAAM,CACd,GAAIO,KAAK,CAACK,cAAN,GAAyB,CAAzB,EAA8BI,UAAlC,CAA8C,CAC5C,GAAMG,CAAAA,WAAW,cAAGpB,KAAK,CAACqB,SAAN,EAApB,CACAZ,QAAQ,CAAC,CAAEa,IAAI,CAAE,eAAR,CAAyBC,KAAK,CAAE,MAAhC,CAAD,CAAR,CACAd,QAAQ,CAAC,CACPa,IAAI,CAAE,YADC,CAEPC,KAAK,CAAE,CACLD,IAAI,CAAE,qBADD,CAELE,MAAM,CAAE,iBAFH,CAGLC,MAAM,CAAE,gBAHH,CAILC,SAAS,CAAE,cAJN,CAKLC,GAAG,CAAEP,WALA,CAFA,CAAD,CAAR,CAUAJ,YAAY,CAAC,IAAD,CAAO,IAAP,CAAaP,QAAb,CAAZ,CACAM,MAAM,CAACa,IAAP,CAAY,YAAZ,CAA0B,CAAC,KAAD,CAAQ,gBAAR,CAA1B,EACD,CACF,CAjBQ,CAiBN,CAACpB,KAAK,CAACK,cAAP,CAjBM,CAAT,CAmBA,mBACE,YAAK,SAAS,iBAAWL,KAAK,CAACS,UAAN,CAAmB,cAAnB,CAAoC,EAA/C,CAAd,uBACE,sBACG,CAACP,MAAM,CAAG,EAAT,CAAc,IAAMA,MAApB,CAA6BA,MAA9B,EACC,GADD,EAEEI,MAAM,CAAG,EAAT,CAAc,IAAMA,MAApB,CAA6BA,MAF/B,CADH,EADF,EADF,CASD,CApCD,CAsCA,cAAeP,CAAAA,KAAf","sourcesContent":["import React, { useEffect, useContext } from \"react\";\r\nimport \"./Timer.scss\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { SocketContext, SetMoveTimerContext } from \"../../../App/context.js\";\r\n\r\nconst Timer = (props) => {\r\n  const dispatch = useDispatch();\r\n  const minute = Math.floor(props.timeLeftToMove / 60);\r\n  const second = props.timeLeftToMove % 60;\r\n  const socket = useContext(SocketContext);\r\n  const setMoveTimer = useContext(SetMoveTimerContext);\r\n  const turnToMove = useSelector((state) => state.boardState.turnToMove);\r\n\r\n  useEffect(() => {\r\n    if (props.timeLeftToMove === 0 && turnToMove) {\r\n      const listItemRef = React.createRef();\r\n      dispatch({ type: \"setGameResult\", value: \"Lose\" });\r\n      dispatch({\r\n        type: \"setMessage\",\r\n        value: {\r\n          type: \"game result message\",\r\n          winner: \"Opponent Won - \",\r\n          reason: \"Game Abandoned\",\r\n          className: \"game-message\",\r\n          ref: listItemRef,\r\n        },\r\n      });\r\n      setMoveTimer(null, true, dispatch);\r\n      socket.emit(\"gameFinish\", [\"Won\", \"Game Abandoned\"]);\r\n    }\r\n  }, [props.timeLeftToMove]);\r\n\r\n  return (\r\n    <div className={`clock ${props.turnToMove ? \"turn-to-move\" : \"\"}`}>\r\n      <span>\r\n        {(minute < 10 ? \"0\" + minute : minute) +\r\n          \":\" +\r\n          (second < 10 ? \"0\" + second : second)}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Timer;\r\n"]},"metadata":{},"sourceType":"module"}