{"ast":null,"code":"import _regeneratorRuntime from\"F:/Web/C\\u1EDD T\\u01B0\\u1EDBng/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"F:/Web/C\\u1EDD T\\u01B0\\u1EDBng/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useContext}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Navbar,NavDropdown,Nav}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import callAPI from\"../../App/callAPI.js\";import Invites from\"./Invites/Invites.jsx\";import{SocketContext}from\"../../App/context.js\";import\"./NavBar.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NavBar=function NavBar(props){var dispatch=useDispatch();var socket=useContext(SocketContext);var lang=useSelector(function(state){return state.appState.lang;});var playerInfo=useSelector(function(state){return state.appState.playerInfo;});var handleSetLang=function handleSetLang(event){var selectedLang=event.currentTarget.text;dispatch({type:\"setLang\",value:selectedLang});if(playerInfo)callAPI(\"POST\",\"api/setLang\",{username:playerInfo.username,choosenLang:selectedLang});};useEffect(function(){document.querySelector(\"title\").innerText=lang===\"English\"?\"Xiangqi\":\"Cờ Tướng\";},[lang]);var isAuthenticated=useSelector(function(state){return state.appState.isAuthenticated;});var handleLogout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:props.setWaitForResponse(true);_context.next=3;return callAPI(\"GET\",\"api/logout\",null);case 3:dispatch({type:\"setIsAuthenticated\",value:false});dispatch({type:\"setPlayerInfo\",value:null});if(props.setRedirect)props.setRedirect(true);socket.disconnect();case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleLogout(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Navbar,{expand:\"md\",className:\"nav-bar\",children:[/*#__PURE__*/_jsx(Invites,{lang:lang}),/*#__PURE__*/_jsx(Navbar.Brand,{children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"link-brand\",children:lang===\"English\"?\"Xiangqi\":\"Cờ Tướng\"})}),/*#__PURE__*/_jsx(Navbar.Toggle,{\"aria-controls\":\"basic-navbar-nav\"}),/*#__PURE__*/_jsx(Navbar.Collapse,{id:\"basic-navbar-nav\",children:/*#__PURE__*/_jsxs(Nav,{className:\"nav\",children:[props.setRedirect?/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"link nav-link\",children:lang===\"English\"?\"Play\":\"Chơi\"}):null,/*#__PURE__*/_jsx(Link,{target:isAuthenticated&&isAuthenticated!==\"guest\"?\"_self\":\"_self\",to:\"/\".concat(isAuthenticated&&isAuthenticated!==\"guest\"?\"home\":\"signin\"),className:\"link nav-link\",style:{display:props.setRedirect?\"none\":\"inline\"},children:isAuthenticated&&isAuthenticated!==\"guest\"?lang===\"English\"?\"Home\":\"Trang Chủ\":lang===\"English\"?\"Sign In\":\"Đăng Nhập\"}),/*#__PURE__*/_jsx(\"button\",{className:\"link nav-link logout\",onClick:handleLogout,style:{display:isAuthenticated&&isAuthenticated!==\"guest\"?\"inline\":\"none\"},children:lang===\"English\"?\"Log Out\":\"Đăng Xuất\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:\"link nav-link \",style:{display:isAuthenticated&&isAuthenticated!==\"guest\"?\"none\":\"inline\"},children:lang===\"English\"?\"Sign Up\":\"Đăng Ký\"}),/*#__PURE__*/_jsxs(NavDropdown,{title:lang,id:\"basic-nav-dropdown\",children:[/*#__PURE__*/_jsx(NavDropdown.Item,{onClick:handleSetLang,children:\"Ti\\u1EBFng Vi\\u1EC7t\"}),/*#__PURE__*/_jsx(NavDropdown.Item,{onClick:handleSetLang,children:\"English\"})]})]})})]});};export default NavBar;","map":{"version":3,"sources":["F:/Web/Cờ Tướng/front_end/src/Components/Main/NavBar/NavBar.jsx"],"names":["React","useEffect","useContext","useDispatch","useSelector","Navbar","NavDropdown","Nav","Link","callAPI","Invites","SocketContext","NavBar","props","dispatch","socket","lang","state","appState","playerInfo","handleSetLang","event","selectedLang","currentTarget","text","type","value","username","choosenLang","document","querySelector","innerText","isAuthenticated","handleLogout","setWaitForResponse","setRedirect","disconnect","display"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Navbar, NavDropdown, Nav } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport callAPI from \"../../App/callAPI.js\";\r\nimport Invites from \"./Invites/Invites.jsx\";\r\nimport { SocketContext } from \"../../App/context.js\";\r\nimport \"./NavBar.scss\";\r\n\r\nconst NavBar = (props) => {\r\n  const dispatch = useDispatch();\r\n  const socket = useContext(SocketContext);\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const playerInfo = useSelector((state) => state.appState.playerInfo);\r\n\r\n  const handleSetLang = (event) => {\r\n    const selectedLang = event.currentTarget.text;\r\n    dispatch({ type: \"setLang\", value: selectedLang });\r\n    if (playerInfo)\r\n      callAPI(\"POST\", \"api/setLang\", {\r\n        username: playerInfo.username,\r\n        choosenLang: selectedLang,\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.querySelector(\"title\").innerText =\r\n      lang === \"English\" ? \"Xiangqi\" : \"Cờ Tướng\";\r\n  }, [lang]);\r\n\r\n  const isAuthenticated = useSelector(\r\n    (state) => state.appState.isAuthenticated\r\n  );\r\n\r\n  const handleLogout = async () => {\r\n    props.setWaitForResponse(true);\r\n    await callAPI(\"GET\", \"api/logout\", null);\r\n    dispatch({ type: \"setIsAuthenticated\", value: false });\r\n    dispatch({ type: \"setPlayerInfo\", value: null });\r\n    if (props.setRedirect) props.setRedirect(true);\r\n    socket.disconnect();\r\n  };\r\n\r\n  return (\r\n    <Navbar expand=\"md\" className=\"nav-bar\">\r\n      <Invites lang={lang} />\r\n      <Navbar.Brand>\r\n        <Link to=\"/\" className=\"link-brand\">\r\n          {lang === \"English\" ? \"Xiangqi\" : \"Cờ Tướng\"}\r\n        </Link>\r\n      </Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n      <Navbar.Collapse id=\"basic-navbar-nav\">\r\n        <Nav className=\"nav\">\r\n          {props.setRedirect ? (\r\n            <Link to=\"/\" className=\"link nav-link\">\r\n              {lang === \"English\" ? \"Play\" : \"Chơi\"}\r\n            </Link>\r\n          ) : null}\r\n          <Link\r\n            target={\r\n              isAuthenticated && isAuthenticated !== \"guest\" ? \"_self\" : \"_self\"\r\n            }\r\n            to={`/${\r\n              isAuthenticated && isAuthenticated !== \"guest\" ? \"home\" : \"signin\"\r\n            }`}\r\n            className=\"link nav-link\"\r\n            style={{\r\n              display: props.setRedirect ? \"none\" : \"inline\",\r\n            }}\r\n          >\r\n            {isAuthenticated && isAuthenticated !== \"guest\"\r\n              ? lang === \"English\"\r\n                ? \"Home\"\r\n                : \"Trang Chủ\"\r\n              : lang === \"English\"\r\n              ? \"Sign In\"\r\n              : \"Đăng Nhập\"}\r\n          </Link>\r\n          <button\r\n            className=\"link nav-link logout\"\r\n            onClick={handleLogout}\r\n            style={{\r\n              display:\r\n                isAuthenticated && isAuthenticated !== \"guest\"\r\n                  ? \"inline\"\r\n                  : \"none\",\r\n            }}\r\n          >\r\n            {lang === \"English\" ? \"Log Out\" : \"Đăng Xuất\"}\r\n          </button>\r\n          <Link\r\n            to=\"/signup\"\r\n            className=\"link nav-link \"\r\n            style={{\r\n              display:\r\n                isAuthenticated && isAuthenticated !== \"guest\"\r\n                  ? \"none\"\r\n                  : \"inline\",\r\n            }}\r\n          >\r\n            {lang === \"English\" ? \"Sign Up\" : \"Đăng Ký\"}\r\n          </Link>\r\n          <NavDropdown title={lang} id=\"basic-nav-dropdown\">\r\n            <NavDropdown.Item onClick={handleSetLang}>\r\n              Tiếng Việt\r\n            </NavDropdown.Item>\r\n            <NavDropdown.Item onClick={handleSetLang}>English</NavDropdown.Item>\r\n          </NavDropdown>\r\n        </Nav>\r\n      </Navbar.Collapse>\r\n    </Navbar>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n"]},"metadata":{},"sourceType":"module"}