{"ast":null,"code":"import Piece from \"./piece.js\";\nimport elephantRules from \"./move_rules/elephantRules.js\";\n\nclass Elephant extends Piece {\n  constructor(width, row, col, name, side) {\n    super(width, row, col, name);\n    this.moves = elephantRules;\n    this.choosenSide = side;\n  }\n\n  setNewPosition(x, y, board) {\n    const newCol = Math.floor(x / this.width);\n    const newRow = Math.floor(y / this.width);\n    const [curRow, curCol] = this.position;\n    const [translateX, translateY] = [curCol * this.width, curRow * this.width];\n    this.translate = `translate(${translateX}, ${translateY})`;\n    const maxRow = this.side === this.choosenSide[0] ? 5 : 10;\n    const minRow = this.side === this.choosenSide[0] ? 0 : 5;\n\n    if (newCol >= 0 && newCol < 9 && newRow >= minRow && newRow < maxRow) {\n      if (this.checkValidMove(newRow - curRow, newCol - curCol, board)) {\n        if (!board[newRow][newCol].side) {\n          if (!this.countPiecesBetween(newRow, newCol, board) === 0) return this.setPosition(false, newRow, newCol);else if (board[newRow][newCol].side !== board[curRow][curCol].side) if (!this.countPiecesBetween(newRow, newCol, board) === 1) return this.setPosition(true, newRow, newCol);\n        }\n      }\n    }\n\n    return null;\n  }\n\n  countPiecesBetween(newRow, newCol, board) {\n    let [curRow, curCol] = this.position;\n    let count = 0;\n\n    do {\n      curCol += curCol > newCol ? -1 : 1;\n      curRow += curRow > newRow ? -1 : 1;\n      if (board[curRow][curCol]) count++;\n    } while (curCol !== newCol && curRow !== newRow);\n\n    return count;\n  }\n\n}\n\nexport default Elephant;","map":{"version":3,"sources":["F:/Web/Cờ Tướng/front_end/src/pieces/elephant.js"],"names":["Piece","elephantRules","Elephant","constructor","width","row","col","name","side","moves","choosenSide","setNewPosition","x","y","board","newCol","Math","floor","newRow","curRow","curCol","position","translateX","translateY","translate","maxRow","minRow","checkValidMove","countPiecesBetween","setPosition","count"],"mappings":"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","sourcesContent":["import Piece from \"./piece.js\";\r\nimport elephantRules from \"./move_rules/elephantRules.js\";\r\n\r\nclass Elephant extends Piece {\r\n  constructor(width, row, col, name, side) {\r\n    super(width, row, col, name);\r\n    this.moves = elephantRules;\r\n    this.choosenSide = side;\r\n  }\r\n\r\n  setNewPosition(x, y, board) {\r\n    const newCol = Math.floor(x / this.width);\r\n    const newRow = Math.floor(y / this.width);\r\n    const [curRow, curCol] = this.position;\r\n    const [translateX, translateY] = [curCol * this.width, curRow * this.width];\r\n    this.translate = `translate(${translateX}, ${translateY})`;\r\n    const maxRow = this.side === this.choosenSide[0] ? 5 : 10;\r\n    const minRow = this.side === this.choosenSide[0] ? 0 : 5;\r\n    if (newCol >= 0 && newCol < 9 && newRow >= minRow && newRow < maxRow) {\r\n      if (this.checkValidMove(newRow - curRow, newCol - curCol, board)) {\r\n        if (!board[newRow][newCol].side) {\r\n          if (!this.countPiecesBetween(newRow, newCol, board) === 0)\r\n            return this.setPosition(false, newRow, newCol);\r\n          else if (board[newRow][newCol].side !== board[curRow][curCol].side)\r\n            if (!this.countPiecesBetween(newRow, newCol, board) === 1)\r\n              return this.setPosition(true, newRow, newCol);\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  countPiecesBetween(newRow, newCol, board) {\r\n    let [curRow, curCol] = this.position;\r\n    let count = 0;\r\n    do {\r\n      curCol += curCol > newCol ? -1 : 1;\r\n      curRow += curRow > newRow ? -1 : 1;\r\n      if (board[curRow][curCol]) count++;\r\n    } while (curCol !== newCol && curRow !== newRow);\r\n\r\n    return count;\r\n  }\r\n}\r\n\r\nexport default Elephant;\r\n"]},"metadata":{},"sourceType":"module"}